<div content-for="rightNav">
	<a class="btn btn-navbar" ng-click="findMatches(0)">
	<i class="fa fa-check fa-3"></i>  SEND</a>
</div>

<div class="scrollable" id="quicklunch">
<div class="scrollable-content">
<div style="margin-top:30px;">
	<!-- Timeslots -->
	<div class="panel" id="timeslots" style="display:none">
  <div class="panel-heading">
    <h2 class="panel-title">
      When
    </h2>
  </div>
  <div class="panel-body">
		<ul class="col-xs-12" id="slotlist">
			<form name="newTimeslot">
				<div class="form-control-wrapper date">
					<label for="date" class="sr-only">Datum</label>
					<input type="text" id="form-control-date" class="form-control" ng-model="date" name="date" placeholder="Datum">
				</div>
				<div class="form-control-wrapper startTime">
					<label for="startTime" class="sr-only">von</label>
					<input type="text" id="form-control-startTime" class="form-control" ng-model="startTime" name="startTime" placeholder="von"> 
				</div>
				<div class="form-control-wrapper pull-right endTime">
					<label for="endTime" class="sr-only">bis</label>
					<input type="text" id="form-control-endTime" class="form-control" ng-model="endTime" name="endTime" placeholder="bis">
				</div>
				<div style="clear: left;"></div>
          <center>
          <button type="submit" id="buttonPicker"class="btn btn-default" ng-click="addTimeslotToRequest(); checkRequest()">
            <i class="fa fa-plus"></i>
          </button>
        </center>
			</form>
  		  <li ng-repeat="timeslot in config.model.requests[0].timeslots">{{timeslot.startTime | date : 'EEEE, dd.MM.yyyy'}}: {{timeslot.startTime | date : 'HH:mm'}} - {{timeslot.endTime | date : 'HH:mm'}} 
         <a class="pull-right" ng-click="config.remTimeslot(timeslot.startTime, timeslot.endTime); checkRequest()"><i class="fa fa-minus-circle fa-3"></i></a>
      </li>
		</ul>
  </div>
</div>

  
  <!-- Location -->
  <!-- 
    TODO:
    first update takes some seconds in some cases - delay of API or does the model not update?
    -->
  <div bs-panel title="Where" style="display:none">
    <!--
		<button class="btn btn-default" ng-click="setCurrentPosition()"><i class="fa fa-location-arrow"></i> Current position</button>
		<button class="btn btn-default" onclick="window.location.href='#/location'">Custom</button>
		-->
		<div id="location-select" class="form-control-wrapper">
			<label for="location" class="sr-only">location</label>
			<input type="text" class="form-control" ng-model="position" name="location" placeholder="Current location" onfocus="window.location.href='#/location'">
			<img src="http://maps.google.com/mapfiles/marker.png" draggable="false"></img>
		</div>
		<!--
		<div>Lat: {{config.model.requests[0].currentPosition.latitude}}</div>
		<div>Lon: {{config.model.requests[0].currentPosition.longitude}}</div>
		-->
  </div>
  
	  <!-- Timeslots -->
  <div class="panel">
  <div class="panel-heading">
    <h2 style="margin-bottom:0px;" class="panel-title">
      <span ng-click="showTimeList()">
			  <i ng-show="showDates" class="fa fa-chevron-circle-down button-grey"></i>
        <i ng-show="!showDates" class="fa fa-chevron-circle-right button-grey"></i>
				When? 
        <span>({{config.model.requests[0].invitees.length}})</span>
      </span>
      <a class="btn pull-right" style="margin-bottom:0px; padding-top: 0px;" href="#/selectInvitees">
    	Now
    	<!--<i class="fa fa-plus-circle fa-3 button-green"></i>-->
			<img src="res/clock.png" style="width:15px"></img>
      </a>
    </h2>
  </div>
  <div class="panel-body" ng-show="showDates">
  <ul class="list-group">
		<li ng-repeat="timeslot in config.model.requests[0].timeslots">{{timeslot.startTime | date : 'EEEE, dd.MM.yyyy'}}: {{timeslot.startTime | date : 'HH:mm'}} - {{timeslot.endTime | date : 'HH:mm'}} 
			<a class="pull-right" ng-click="config.remTimeslot(timeslot.startTime, timeslot.endTime)"><i class="fa fa-minus-circle fa-3"></i></a>
    </li>
  </ul>
  </div>
  </div>
	
	<!-- Location -->
  <div class="panel" ng-init="setInitLocation()">
  <div class="panel-heading">
    <h2 style="margin-bottom:0px;" class="panel-title">
      <span ng-click="showMap()">
			  <i ng-show="showLocation" class="fa fa-chevron-circle-down button-grey"></i>
        <i ng-show="!showLocation" class="fa fa-chevron-circle-right button-grey"></i>
				Where? 
      </span>
      <a class="btn pull-right" style="margin-bottom:0px; padding-top: 0px;" href="#/location">
    	<span ng-show="isLocationInit">Current location</span>
			<span ng-show="!isLocationInit">Custom...</span>
			<img src="http://maps.google.com/mapfiles/marker.png" draggable="false" style="width:15px"></img>
      </a>
    </h2>
  </div>
  <div class="panel-body" ng-show="showLocation">
		<a href="#/location">
			<img src="http://maps.googleapis.com/maps/api/staticmap?center={{config.model.requests[0].currentPosition.latitude}},{{config.model.requests[0].currentPosition.longitude}}&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Clabel:%7C{{config.model.requests[0].currentPosition.latitude}},{{config.model.requests[0].currentPosition.longitude}}" draggable="false" style="border: 1px solid black"></img>
		</a>
  </div>
  </div>
	
  <!-- Invitees -->
  <div class="panel div-has-navbar-bottom-large">
  <div class="panel-heading">
    <h2 style="margin-bottom:0px;" class="panel-title">
      <span ng-click="showList()">
				<i ng-show="showInvitees" class="fa fa-chevron-circle-down button-grey"></i>
        <i ng-show="!showInvitees" class="fa fa-chevron-circle-right button-grey"></i>
				Who? 
        <span>({{config.model.requests[0].invitees.length}})</span>
      </span>
      <a class="btn pull-right" style="margin-bottom:0px; padding-top: 0px;" href="#/selectInvitees">
    	Add contacts
    	<i class="fa fa-plus-circle fa-3 button-green"></i>
      </a>
    </h2>
  </div>
  <div class="panel-body" ng-show="showInvitees">
  <ul class="list-group" style="margin-bottom:0px">
    <li ng-repeat="invitee in contacts | filter:config.isInvitee" class="list-group-item">
      <h3 style="margin-bottom:0px;"><small>{{invitee.name}} 
      <a class="btn pull-right" ng-click="config.toggleInvitee(invitee)"><i class="fa fa-minus-circle fa-3 button-red"></i></a></small></h3>
    </li>
  </ul>
  </div>
  </div>
	
  <!-- Overlay for response -->
  <div overlay="responseOverlay">
    <h4 class="overlay-title">Response</h4>
    <br> 
    <!-- TODO: ng repeat not working
    <div ng-repeat="name in response.names">repeat</div>
    -->

    <div>Who? {{config.model.requests[1].response.subjects[0]}}</div>
    <p>When? {{config.model.requests[1].response.timeslot.startTime}}</p>

    <p toggle="off" bubble target="responseOverlay">
      <span class="btn btn-default">Thanks!</span>
    </p>  
  </div>
</div>
</div>
</div>
<div id="findmatches" class="navbar navbar-app navbar-absolute-bottom">
  	<button class="btn btn-default justified" ng-click="findMatches(0)"><b>Send Request!</b></button>
</div>
